<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <meta name="format-detection" content="telephone=no" />
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.css" />
        <link rel="stylesheet" type="text/css" href="css/index.css" />
        <link rel="stylesheet" href="css/style.css">
        <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
        <script src="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.js"></script>
        <script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?sensor=false"></script>
        <link href="http://code.google.com/apis/maps/documentation/javascript/examples/default.css" rel="stylesheet" type="text/css" />
        <script type="text/javascript" src="js/googlemap.js"></script>
        <title>Iniciar Sesión</title>
        <style type="text/css">
            #map-page, #map-canvas{
                width: 100%;
                height: 100%;
                padding: 0;
            }
        </style>
    </head>
    <body>
        <div id="inicioSesion" data-role="page">
            <div data-role="header" data-position="fixed">
                <h1>Iniciar Sesión</h1>
            </div>
            <div data-role="content">   
                    <img src="img/logoIbero.jpg" alt="">
                    <form id="formulario" >
                  
                            <label> Numero de cuenta </label>
                            <input type="text" id="nombredeusuario" name="nombredeusuario">
                  
                            <label> Contraseña </label>
                            <input type="password" id="clave" name="clave" >
             
                            <input type="submit" value="Login" id="botonLogin">
                  
                    </form>     
            </div>
        </div>
             
            <script>
             
            $('#formulario').submit(function() { 
                 
                // recolecta los valores que inserto el usuario
                var datosUsuario = $("#nombredeusuario").val()
                var datosPassword = $("#clave").val()
                
                archivoValidacion = "http://revolucion.mobi/ejemplos/phonegap/envioFormulario/validacion_de_datos.php?jsoncallback=?"
             
                $.getJSON( archivoValidacion, { usuario:datosUsuario ,password:datosPassword})
                .done(function(respuestaServer) {
                    
                    
                    
                    if(respuestaServer.validacion == "ok"){
                      
                        /// si la validacion es correcta, muestra la pantalla "home"
                        $.mobile.changePage("menu.html", "slide")
                      
                    }else{
                        // alert(respuestaServer.mensaje + "\nGenerado en: " + respuestaServer.hora + "\n" +respuestaServer.generador)
                        $.mobile.changePage("menu.html", "slide")
                      /// ejecutar una conducta cuando la validacion falla
                    }
              
                })
                return false;
            })
                
            </script>
        </div>

        <script type="text/javascript" src="phonegap.js"></script>
        <script type="text/javascript" src="js/index.js"></script>
    </body>
</html>
